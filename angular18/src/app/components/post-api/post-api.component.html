<app-alert-component [msg]="'Welcome to POST-API page'" [alertClass]="'alert-success'"/>
<div class="bg-success text-light p-3 rounded my-2">
  <h4>Post API</h4>
  <h5>Create Department, Department List</h5>
</div>
<div class="row justify-content-between">
  <div class="col-7 overflow-hidden rounded border p-0">
    <div class="bg-secondary text-light px-4 py-2 row justify-content-between align-items-center">
      <span class="col-8">Department List</span>
      <button class=" col-4 btn btn-success" (click)="getDepartments()">Get Departments</button>
    </div>
    <div class="p-2">
      <table class="table table-success table-striped">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">City</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          @for (dept of deptList; track $index) {
          <tr>
            <td>{{ $index + 1 }}</td>
            <td>{{ dept.departmentName }}</td>
            <td>{{ dept.departmentLogo }}</td>
            <td>
              <!-- <button class="btn btn-primary mx-1" (click)="onEdit(dept)">
                Edit
              </button> -->
              <app-cs-button [btnClass]="'btn btn-primary mx-1'" [btnText]="'Edit'" (onBtnClick)="onEdit(dept)" />
              <!-- <button class="btn btn-danger mx-1" (click)="onDelete(dept.departmentId)">
                Delete
              </button> -->
              <app-cs-button [btnClass]="'btn btn-danger mx-1'" [btnText]="'CS Delete'" (onBtnClick)="onDelete(dept.departmentId)" />
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
  <div class="col-4 overflow-hidden rounded p-0 border">
    <div class="bg-secondary text-light p-2">New Department</div>
    <div class="form p-2">
      <div class="mb-3">
        <label for="departmentName" class="form-label">Department Name</label>
        <input
          [(ngModel)]="deptObj.departmentName"
          type="text"
          class="form-control"
          id="departmentName"
          placeholder="Department 1"
        />
      </div>
      <div class="mb-3">
        <label for="departmentLogo" class="form-label">Department Logo</label>
        <input
          [(ngModel)]="deptObj.departmentLogo"
          type="url"
          class="form-control"
          id="departmentLogo"
          placeholder="https://url.com"
        />
      </div>
      <div class="row">
        <div class="col-6">
          <button class="btn w-100 btn-secondary">Reset</button>
        </div>
        <div class="col-6">
          @if (deptObj.departmentId == 0) {
          <button class="btn w-100 btn-success" (click)="onSave()">
            Submit
          </button>
        }@else {
            <button class="btn w-100 btn-warning" (click)="onUpdate()">Edit</button>
          }
        </div>
      </div>
    </div>
  </div>
</div>
